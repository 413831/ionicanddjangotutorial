<!DOCTYPE HTML> 
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
--> 
<html> 
    <head> 
        <title>Display items around user with Ionic and Django</title>
        <link rel="canonical" href="https://www.ionicanddjangotutorial.com/">
        <meta name="description" content="In this tutorial, i will show you how to get items around you based on geolocation and how to display them on a google map inside a Ionic 4 application"/>
        <meta name="author" content="surbier christophe">
        <meta charset="utf-8"/> 
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/> 
        <link rel="stylesheet" href="assets/css/main.css"/>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125461829-1"></script>
        <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125461829-1');
</script>         
        <style>.responsiveimage {
    width: 100%;
    height: auto;
}</style>
    </head>     
    <body class="is-preload"> 
        <!-- Wrapper -->         
        <div id="wrapper"> 
            <!-- Main -->             
            <div id="main"> 
                <div class="inner"> 
                    <!-- Header -->                     
                    <header id="header"> 
                        <a href="index.html" class="logo"><strong>Ionic and Django Tutorial</strong></a>
                        <ul class="icons">
                            <li>Share on 
                                <!-- AddToAny BEGIN -->
                                <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
                                    <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
                                    <a class="a2a_button_facebook"></a>
                                    <a class="a2a_button_twitter"></a>
                                    <a class="a2a_button_linkedin"></a>
                                </div>
                                <script async src="https://static.addtoany.com/menu/page.js"></script>
                                <!-- AddToAny END -->                                 
                            </li>
                        </ul>                         
                    </header>                     
                    <!-- Content -->                     
                    <section> 
                        <header class="main"> 
                            <h1>Display items around based on geolocation into a Ionic 4 application</h1>
                            <b>November 2019</b>
                            <br>
                            <style>.bmc-button img {
    width: 35px !important;
    margin-bottom: 1px !important;
    box-shadow: none !important;
    border: none !important;
    vertical-align: middle !important;
}

.bmc-button {
    padding: 7px 5px 7px 10px !important;
    line-height: 35px !important;
    height: 51px !important;
    min-width: 217px !important;
    text-decoration: none !important;
    display: inline-flex !important;
    color: #ffffff !important;
    background-color: #FF5F5F !important;
    border-radius: 5px !important;
    border: 1px solid transparent !important;
    padding: 7px 5px 7px 10px !important;
    font-size: 28px !important;
    letter-spacing: 0.6px !important;
    box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
    -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
    margin: 0 auto !important;
    font-family: 'Cookie', cursive !important;
    -webkit-box-sizing: border-box !important;
    box-sizing: border-box !important;
    -o-transition: 0.3s all linear !important;
    -webkit-transition: 0.3s all linear !important;
    -moz-transition: 0.3s all linear !important;
    -ms-transition: 0.3s all linear !important;
    transition: 0.3s all linear !important;
}

.bmc-button:hover,
.bmc-button:active,
.bmc-button:focus {
    -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
    text-decoration: none !important;
    box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
    opacity: 0.85 !important;
    color: #ffffff !important;
}</style>
                            <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet">
                            <a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/csurbier"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:15px;font-size:28px !important;">Buy me a coffee</span></a>
                            <table>
                                <tr>
                                    <td>  Discover my new eBook and get 20% on your purchase with this coupon code : <strong>6XGMDHWX</strong> </td>
                                </tr>
                                <tr>
                                    <td><a href="https://djangoadminultimateguide.idevotion.fr" class="button">Django Admin ultimate guide</a></td>
                                </tr>
                            </table>
                        </header>                         
                        <span class="image main"></span> 
                        <p>
                            In previous tutorials, we focused on users so now it's time to manage our bikes: to create some with our django admin, to get them based on the geolocation of the user. In our Ionic application, we want to display bikes around the user on a google map.  <br>
                            As a reminder here how our bikes model looks like: </p>
                        <pre><code>class Bike(models.Model):
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    reference = models.CharField(max_length=100,db_index=True)
    qrCode = models.CharField(max_length=100, null=True, blank=True, db_index=True)
    picture = models.ImageField(upload_to=&#x22;media/%Y/%m/%d&#x22;,null=True, blank=True)
    location = models.PointField(null=True, blank=True)
    available = models.BooleanField(default=True)
    valid = models.BooleanField(default=True)
    class Meta:
        verbose_name = (&#x27;Bike&#x27;)
        verbose_name_plural = (&#x27;Bikes&#x27;)</code></pre>
                        <h2>Geolocate items in django backoffice</h2>
                        <p>
                           First we will use our Django admin interface, to add some bikes in our database.<br>And because we would like to manage/sse our bikes directly on a google map inside the django admin interface, we will use this <a href="https://github.com/erdem/django-map-widgets" target="_blank">wonderful django library</a>. So we add:</p>
                        <pre><code>django-map-widgets==0.2.0</code></pre>
                        <p>
                            in our <b>requirements.txt</b> file, and <b>mapwidgets</b> in the list of our installed applications: </p>
                        <pre><code>
INSTALLED_APPS = [
    'jet',
    'backoffice.apps.BackofficeConfig',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'rest_framework_docs',
    'oauth2_provider',
    'mapwidgets',
]</code></pre>
                        <p>
                       	We will also add the <b>MAP_WIDGETS</b> configuration inside our <b>settings.py</b> file to declare the Google Map API Key that we get from <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">here</a>.      </p>
                        <pre><code>MAP_WIDGETS = {
    &#x22;GooglePointFieldWidget&#x22;: (
        (&#x22;zoom&#x22;, 15),
        (&#x22;mapCenterLocationName&#x22;, &#x22;paris&#x22;),
        (&#x22;GooglePlaceAutocompleteOptions&#x22;, {&#x27;componentRestrictions&#x27;: {&#x27;country&#x27;: &#x27;fr&#x27;}}),
        (&#x22;markerFitZoom&#x22;, 12),
    ),
    &#x22;GOOGLE_MAP_API_KEY&#x22;: &#x22;yourapikey&#x22;
}</code></pre>
                        <p>
                            Now in our <b>admin.py</b> we will declare a new class <b>BikeAdmin</b> to better describe how we want Django to manage and display our models. </p>
                        <pre><code>from django.contrib import admin
# *coding: utf-8*
from django.contrib import admin
from .models import *
from mapwidgets.widgets import GooglePointFieldInlineWidget
from django.contrib.gis.db.models import PointField
class BikeAdmin(admin.ModelAdmin):
    formfield_overrides = {
        PointField: {&#x22;widget&#x22;: GooglePointFieldInlineWidget}
    }
    fieldsets = [
        (None, {&#x27;fields&#x27;: [&#x27;reference&#x27;,&#x27;qrCode&#x27;,&#x27;picture&#x27;,&#x27;location&#x27;,&#x27;available&#x27;,&#x27;valid&#x27;]}),
    ]
    list_display = (&#x27;location&#x27;,&#x27;available&#x27;,&#x27;valid&#x27;,)
    list_filter = (&#x27;available&#x27;,&#x27;valid&#x27;,)
admin.site.register(User)
admin.site.register(Bike,BikeAdmin)</code></pre>
                        <p>We are using the <b>mapwidgets</b> library to display a google map helping us to manage the location field.<br>If everything goes well, you should be able when editing or adding a new <b>Bike</b> inside the Django admin, to see a google map and to search location by address using the google map search input box (<u>you need to activate the google places service to do this</u>).<br>This is awesome.</p>
                        <img src="images/googlemap-django-admin.png" class="responsiveimage">
                        <p> <i>Please notice that if your <b>google map api key</b> is not valid, you will see a "For development purposes only" on the google map</i> </p>
                        <p>
                            Ok so now you can create as many bikes as you want into the backend. </p>
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                        <!-- IonicDjangoBloc2 -->
                        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5248722664237652" data-ad-slot="3940223516" data-ad-format="auto" data-full-width-responsive="true"></ins>
                        <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                        <h2>
                       		Get geolocated items by distance and location using Django rest framework      </h2>
                        <p>
                           The goal of our Ionic application is to display bikes around the user on a google map or thru a listing page. To do this, we will have to geolocate our user but also to ask our django backend to send us back, bikes ordered by location and distance. It is obvious than we need to order items by distance, since we don't want to display a bike located on New York if the user is in Paris... <br>Hopefully there is another great <a href="https://github.com/djangonauts/django-rest-framework-gis" target="_blank">django library</a> to manage it : <b>Django Rest Framework Gis</b>. <br>Using this add-on we will add geographic features to standard Django rest framework. </p>
                        <p>
                            Let's add the library to our <b>requiments.txt</b> file. </p>
                        <pre><code>pip install djangorestframework-gis</code></pre>
                        <p>
                            and add the <b>rest_framework_gis</b> to our installed apps after the <b>rest_framework</b> library </p>
                        <pre><code>
INSTALLED_APPS = [
    &#x27;jet&#x27;,
    &#x27;backoffice.apps.BackofficeConfig&#x27;, # &#x3C;===== this is the important line
    &#x27;django.contrib.admin&#x27;,
    &#x27;django.contrib.auth&#x27;,
    &#x27;django.contrib.contenttypes&#x27;,
    &#x27;django.contrib.sessions&#x27;,
    &#x27;django.contrib.messages&#x27;,
    &#x27;django.contrib.staticfiles&#x27;,
    &#x27;rest_framework&#x27;,
    &#x27;rest_framework_gis&#x27;,
    &#x27;rest_framework_docs&#x27;,
    &#x27;oauth2_provider&#x27;,
    &#x27;mapwidgets&#x27;,
]</code></pre>
                        <p>Ok so now we will add a new endpoint into our <b>urls.py</b> file inside our <b>api</b> directory, to get the bikes list </p>
                        <pre><code>from django.urls import path
from django.conf.urls import include,url
from rest_framework.routers import DefaultRouter
router = DefaultRouter()
from api.views import *
urlpatterns = [
    path(&#x27;users/&#x27;, UserListCreateView.as_view(), name=&#x27;users_list&#x27;),
   # url(r&#x27;^user/(?P&#x3C;pk&#x3E;[0-9A-Fa-f-]+)/$&#x27;, UserDetailView.as_view(), name=&#x27;user_detail&#x27;),
    path(&#x27;user/&#x3C;uuid:pk&#x3E;/&#x27;,  UserDetailView.as_view(), name=&#x27;user_detail&#x27;),
    path(&#x27;&#x27;, include(router.urls)),
    url(r&#x27;^createpaymentintent/$&#x27;, createpaymentintent,name=&#x27;createpaymentintent&#x27;),
    path(&#x27;bikes/&#x27;, BikeListView.as_view(), name=&#x27;bikes_list&#x27;),
]</code></pre>
                        <p>
                            i added the <b>bikes/</b> endpoint and define a new method <b>BikeListView</b> which will give us a list of bikes. You can notice that this time it will not be possible to create a bike thru the api. </p>
                        <pre><code>class BikeListView(generics.ListAPIView):
    &#x22;&#x22;&#x22;
            get:
                Get list of bikes
    &#x22;&#x22;&#x22;
    permission_classes = [permissions.IsAuthenticated]
    queryset = Bike.objects.all()
    serializer_class = BikeSerializer</code></pre>
                        <p>
                            And we need to implement the <b>BikeSerializer</b> </p>
                        <pre><code>class BikeSerializer(serializers.ModelSerializer):
    class Meta:
        model = Bike
        fields = &#x27;__all__&#x27;</code></pre>
                        <p>
                    	Now you should be able to call the new api endpoint     </p>
                        <pre><code>curl -X GET \
  http://127.0.0.1:8000/api/bikes/ \
  -H &#x27;Accept: */*&#x27; \
  -H &#x27;Accept-Encoding: gzip, deflate&#x27; \
  -H &#x27;Authorization: Bearer 3milTrOHBWoAOB4rBX8FWvpfOEETkO&#x27; \
  -H &#x27;Cache-Control: no-cache&#x27; \
  -H &#x27;Connection: keep-alive&#x27; \
  -H &#x27;Host: 127.0.0.1:8000&#x27; \
  -H &#x27;Postman-Token: 4c277988-a06e-4e89-8edc-5b2707ebb91a,bf96cb77-c3ce-47c2-88bd-8e604fa0d89b&#x27; \
  -H &#x27;User-Agent: PostmanRuntime/7.18.0&#x27; \
  -H &#x27;cache-control: no-cache&#x27;</code></pre>
                        <p>
                            And get as results a list of bikes </p>
                        <pre><code>{
    &#x22;count&#x22;: 5,
    &#x22;next&#x22;: null,
    &#x22;previous&#x22;: null,
    &#x22;results&#x22;: [
        {
            &#x22;id&#x22;: &#x22;7e06fe27-3d44-41e7-a578-abc3bb5cf21b&#x22;,
            &#x22;reference&#x22;: &#x22;B1&#x22;,
            &#x22;qrCode&#x22;: &#x22;B1&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.345623970031738,
                    48.86242796650965
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;df9aec74-990b-4698-902a-bd3d6e56cfec&#x22;,
            &#x22;reference&#x22;: &#x22;B2&#x22;,
            &#x22;qrCode&#x22;: &#x22;B2&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.35231876373291,
                    48.85734582508245
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;f2513216-1f16-43bc-8ad8-705c500e037a&#x22;,
            &#x22;reference&#x22;: &#x22;B3&#x22;,
            &#x22;qrCode&#x22;: &#x22;b3&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.321891784667969,
                    48.84212454876025
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;9c17a5c0-9713-4b94-b016-7a22a6318344&#x22;,
            &#x22;reference&#x22;: &#x22;B4&#x22;,
            &#x22;qrCode&#x22;: &#x22;b4&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.3590216,
                    48.8726678
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;a3bc6e4d-caf1-4721-8b7c-0d17da45dfb2&#x22;,
            &#x22;reference&#x22;: &#x22;B5&#x22;,
            &#x22;qrCode&#x22;: &#x22;B5&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.24153463575874,
                    48.838539720383366
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        }
    ]
}</code></pre>
                        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                        <!-- IonicDjangoBloc2 -->
                        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5248722664237652" data-ad-slot="3940223516" data-ad-format="auto" data-full-width-responsive="true"></ins>
                        <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                        <p>
                            But at this stage, your data is not geolocated and you don't know how the results are ordered. <br>So let's fix this, using the <b>rest-framwork-gis</b> that we imported into our django backend </p>
                        <pre><code>from rest_framework_gis.filters import DistanceToPointFilter
class BikeListView(generics.ListAPIView):
    &#x22;&#x22;&#x22;
            get:
                Get list of bikes
    &#x22;&#x22;&#x22;
    permission_classes = [permissions.IsAuthenticated]
    queryset = Bike.objects.all()
    serializer_class = BikeSerializer
    distance_filter_field = &#x27;location&#x27;
    filter_backends = (DistanceToPointFilter,)
    distance_filter_convert_meters = True </code></pre>
                        <p>
                            The important parameters are: </p>
                        <table>
                            <tr>
                                <td>distance_filter_field=location</td>
                                <td>We indicate that the our geocoded field is <b>location</b> into our django models</td>
                            </tr>
                            <tr>
                                <td>filter_backends = (DistanceToPointFilter,)</td>
                                <td>We want to filter by distance</td>
                            </tr>
                            <tr>
                                <td>distance_filter_convert_meters = True</td>
                                <td>We indicate that the value passed to the API is meters</td>
                            </tr>
                        </table>
                        <p>
                            Now it is super easy to call the api by passing the position of our user (latitude and longitude) and a distance value (expressed in meters) and telling django to send back the bikes that are within the distance </p>
                        <pre><code>http://127.0.0.1:8000/api/bikes/?dist=1000&#x26;point=2.345623970031738,48.86242796650965&#x26;format=json</code></pre>
                        <table>
                            <tr>
                                <td>dist</td>
                                <td>The value expressed in meters where we want to search. Here 1km</td>
                            </tr>
                            <tr>
                                <td>point=2.345623970031738,48.86242796650965</td>
                                <td>The <b>longitude/latitude</b> around which we want to search</td>
                            </tr>
                        </table>
                        <p>
                            If a call the api with these parameters, this time my list of bikes will be shorter since in specified i only wanted results within 1000 meters </p>
                        <pre><code>{
    &#x22;count&#x22;: 2,
    &#x22;next&#x22;: null,
    &#x22;previous&#x22;: null,
    &#x22;results&#x22;: [
        {
            &#x22;id&#x22;: &#x22;7e06fe27-3d44-41e7-a578-abc3bb5cf21b&#x22;,
            &#x22;reference&#x22;: &#x22;B1&#x22;,
            &#x22;qrCode&#x22;: &#x22;B1&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.345623970031738,
                    48.86242796650965
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;df9aec74-990b-4698-902a-bd3d6e56cfec&#x22;,
            &#x22;reference&#x22;: &#x22;B2&#x22;,
            &#x22;qrCode&#x22;: &#x22;B2&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.35231876373291,
                    48.85734582508245
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        }
    ]
}</code></pre>
                        <p>
                            Results are automatically ordered by distance (closer to farest).<br> <b>Et voila</b> how to filter items based on geographic location.<br> <br>As you could notice there is not <b>distance</b> field in the results of json, so if we want to display the distance inside the ionic application, we will have to calculate it. </p>
                        <p>
                            That's why i'm going to show you how to get results ordered by distance using only standard Django framework.<br>We will modify our /bikes endpoint like this: </p>
                        <pre><code>class BikeListView(generics.ListAPIView):
    &#x22;&#x22;&#x22;
            get:
                Get list of bikes
    &#x22;&#x22;&#x22;
    permission_classes = [permissions.IsAuthenticated]
    queryset = Bike.objects.all()
    serializer_class = BikeSerializer
    &#x22;&#x22;&#x22;
    distance_filter_field = &#x27;location&#x27;
    filter_backends = (DistanceToPointFilter,)
    distance_filter_convert_meters = True
    &#x22;&#x22;&#x22;
    def get_queryset(self):
        latitude = self.request.query_params.get(&#x27;latitude&#x27;, None)
        longitude = self.request.query_params.get(&#x27;longitude&#x27;, None)
        max_distance = self.request.query_params.get(&#x27;max_distance&#x27;, None)
        if latitude and longitude:
            point_of_user = Point(float(longitude), float(latitude), srid=4326)
            # Here we&#x27;re actually doing the query, notice we&#x27;re using the Distance class fom gis.measure
            queryset = Bike.objects.filter(
                location__distance_lte=(
                    point_of_user,
                    Distance(km=float(max_distance))
                )
            ).annotate(distance_to_user = DistanceModel(&#x22;location&#x22;,point_of_user)).order_by(&#x27;distance_to_user&#x27;)
        else:
            queryset = Bike.objects.all()
        return queryset</code></pre>
                        <p>
                            i'm overriding the <b>get_queryset</b> method to get a <b>latitude</b>,<b>longitude</b> and <b>max_distance</b> parameters. The <b>max_distance</b> parameters will contain our value to filtered data expressed in Km this time<br><br>
                            Next i'm declaring the queryset asking Django to get all data with distance less than the max_distance and to add this distance (annotate) into a field named <b>distance_to_user</b> </p>
                        <p>
                            Now we need to modify our serializer to get this new field <b>distance_to_user</b> and to add it in the json response list </p>
                        <pre><code>class BikeSerializer(serializers.ModelSerializer):
    distance = serializers.SerializerMethodField()
    class Meta:
        model = Bike
        fields = '__all__'
    def get_distance(self, obj):
        return obj.distance_to_user.km</code></pre>
                        <p>
                            Now if we call our endpoint with new parameters <b>http://127.0.0.1:8000/api/bikes/?longitude=2.345623970031738&latitude=48.86242796650965&max_distance=2.5</b>, we wil obtain: </p>
                        <p> <i>Please notice that this time no need to invert <b>latitude and longitude</b> in your api call</i> </p>
                        <pre><code>{
    &#x22;count&#x22;: 3,
    &#x22;next&#x22;: null,
    &#x22;previous&#x22;: null,
    &#x22;results&#x22;: [
        {
            &#x22;id&#x22;: &#x22;7e06fe27-3d44-41e7-a578-abc3bb5cf21b&#x22;,
            &#x22;distance&#x22;: 0.0,
            &#x22;reference&#x22;: &#x22;B1&#x22;,
            &#x22;qrCode&#x22;: &#x22;B1&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.345623970031738,
                    48.86242796650965
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;df9aec74-990b-4698-902a-bd3d6e56cfec&#x22;,
            &#x22;distance&#x22;: 0.7478063848100001,
            &#x22;reference&#x22;: &#x22;B2&#x22;,
            &#x22;qrCode&#x22;: &#x22;B2&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.35231876373291,
                    48.85734582508245
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        },
        {
            &#x22;id&#x22;: &#x22;9c17a5c0-9713-4b94-b016-7a22a6318344&#x22;,
            &#x22;distance&#x22;: 1.5022571817400001,
            &#x22;reference&#x22;: &#x22;B4&#x22;,
            &#x22;qrCode&#x22;: &#x22;b4&#x22;,
            &#x22;picture&#x22;: null,
            &#x22;location&#x22;: {
                &#x22;type&#x22;: &#x22;Point&#x22;,
                &#x22;coordinates&#x22;: [
                    2.3590216,
                    48.8726678
                ]
            },
            &#x22;available&#x22;: true,
            &#x22;valid&#x22;: true
        }
    ]
}</code></pre>
                        <p>
                            And as you can see the <b>distance</b> (expressed in km) is part of our results. </p>
                        <p>
                            Ok now that we know how to get items around a specificied geographic position, we can switch to our ionic application, and display results on a google map. </p>
                    </section>                     
                    <ul class="pagination"> 
                        <li>
                            <a href="#" class="page active">1</a>
                        </li>                         
                        <li>
                            <a href="ionic-django-around-items-part2.html" class="button">Next</a>
                        </li>                         
                    </ul>                     
                    <section>
                        <div id="disqus_thread"></div>
                        <script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT 
     *  THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR 
     *  PLATFORM OR CMS.
     *  
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: 
     *  https://disqus.com/admin/universalcode/#configuration-variables
     */
    var disqus_config = function () {
        // Replace PAGE_URL with your page's canonical URL variable
        this.page.url = "https://www.ionicanddjangotutorial.com/design-and-setup.html";  
        
        // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        this.page.identifier = "dayone-designsetup"; 
    };
    
    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document, s = d.createElement('script');
        
        // IMPORTANT: Replace EXAMPLE with your forum shortname!
        s.src = 'https://https-www-ionicanddjangotutorial-com.disqus.com/embed.js'
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
                    </section>
                </div>
            </div>             
            <!-- Sidebar -->             
            <div id="sidebar"> 
                <div class="inner"> 
                    <!-- Menu -->                     
                    <nav id="menu"> 
                        <header class="major"> 
                            <h2>Menu</h2> 
                        </header>                         
                        <ul> 
                            <li>
                                <a href="index.html">Homepage</a>
                            </li>                             
                            <li>
                                <a href="terms.html">Terms and conditions</a>
                            </li>
                            <li>
                                <a href="policy.html">Privacy Policy</a>
                            </li>                             
                        </ul>                         
                    </nav>                     
                    <!-- Section -->                     
                    <section> 
                        <header class="major"> 
                            <h2>Get in touch</h2> 
                        </header>                         
                        <p>For any questions, remarks or any development requirement.</p> 
                        <ul class="contact"> 
                            <li class="fa-envelope-o">
                                <a href="mailto:csurbier@idevotion.fr">csurbier@idevotion.fr</a>
                            </li>                             
                            <li class="fa-home">Carrer Riera blanca, 45-47
                                <br/> 
                                08028 Barcelona
                            </li>                             
                        </ul>                         
                    </section>                     
                    <!-- Footer -->                     
                    <footer id="footer"> 
                        <p class="copyright">&copy; Surbier Christophe. All rights reserved. Development: <a href="https://www.idevotion.fr">iDevotion</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p> 
                    </footer>                     
                </div>                 
            </div>             
        </div>         
        <!-- Scripts -->         
        <script src="assets/js/jquery.min.js"></script>         
        <script src="assets/js/browser.min.js"></script>         
        <script src="assets/js/breakpoints.min.js"></script>         
        <script src="assets/js/util.js"></script>         
        <script src="assets/js/main.js"></script>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5248722664237652" data-ad-slot="8488918554" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <noscript>
            Please enable JavaScript to view the 
            <a href="https://disqus.com/?ref_noscript" rel="nofollow">
        comments powered by Disqus. </a>
        </noscript>         
        <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://www.ionicanddjangotutorial.com",
      "contactPoint": [{
        "@type": "ContactPoint",
        "email": "csurbier@idevotion.fr",
        "contactType": "customer support"
      }]
    }
  </script>
        <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Course",
      "name": "Ionic and Signin with Apple",
      "description": "Learn to implement signin with Apple with Ionic",
      "provider": {
        "@type": "Organization",
        "name": "iDevotion",
        "sameAs": "https://www.ionicanddjangotutorial.com"
      }
    }
  </script>
    </body>     
</html>